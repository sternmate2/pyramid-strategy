# =============================================================================
# STOCK ANOMALY DETECTION SYSTEM - Environment Configuration
# =============================================================================

# =============================================================================
# API KEYS (Required - Get from respective providers)
# =============================================================================
# Finnhub API Key (Free tier: 60 calls/minute)
# Sign up at: https://finnhub.io/register
FINNHUB_API_KEY=your_finnhub_api_key_here

# Alpha Vantage API Key (Free tier: 25 calls/day)  
# Sign up at: https://www.alphavantage.co/support/#api-key
ALPHAVANTAGE_API_KEY=your_alpha_vantage_api_key_here

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL Database
POSTGRES_DB=stock_anomaly
POSTGRES_USER=stockuser
POSTGRES_PASSWORD=securepassword123
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://stockuser:securepassword123@postgres:5432/stock_anomaly

# Redis Cache
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis_secure_password
REDIS_DB=0

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# Environment (development, staging, production)
NODE_ENV=development

# API Server Configuration
API_PORT=3000
API_HOST=0.0.0.0

# Python Ingestion Service
INGESTION_PORT=8080
INGESTION_HOST=0.0.0.0

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json

# =============================================================================
# RATE LIMITING
# =============================================================================
# Rate limiting window (15 minutes in milliseconds)
RATE_LIMIT_WINDOW_MS=900000
# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=1000
# Rate limit message
RATE_LIMIT_MESSAGE="Too many requests, please try again later"

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================
# Cache TTL in seconds
PRICE_CACHE_TTL=900
DAILY_CACHE_TTL=3600
HISTORICAL_CACHE_TTL=86400

# =============================================================================
# DATA INGESTION CONFIGURATION
# =============================================================================
# Stock symbols to track (comma-separated)
TRACKED_SYMBOLS=SPY,QQQ,IWM,VTI,AAPL,MSFT,GOOGL,AMZN,TSLA,NVDA

# Ingestion intervals (in minutes)
REALTIME_INTERVAL=15
DAILY_INTERVAL=60

# Market hours (Eastern Time)
MARKET_OPEN_HOUR=9
MARKET_OPEN_MINUTE=30
MARKET_CLOSE_HOUR=16
MARKET_CLOSE_MINUTE=0

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Prometheus metrics
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# Health check intervals
HEALTH_CHECK_INTERVAL=30
DB_HEALTH_CHECK_TIMEOUT=5

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT Configuration (if implementing authentication)
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
JWT_EXPIRES_IN=24h

# API Key for internal service communication
INTERNAL_API_KEY=internal_service_key_change_this

# CORS Configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# =============================================================================
# EXTERNAL SERVICE TIMEOUTS
# =============================================================================
# API request timeouts (in seconds)
FINNHUB_TIMEOUT=10
YAHOO_TIMEOUT=15
ALPHAVANTAGE_TIMEOUT=20

# Retry configuration
MAX_RETRIES=3
RETRY_DELAY=1000
BACKOFF_FACTOR=2

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================
# Docker network
DOCKER_NETWORK=stock-anomaly-network

# Volume paths
DB_DATA_PATH=./data/postgres
REDIS_DATA_PATH=./data/redis
LOGS_PATH=./logs

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
# Development mode settings
DEBUG=false
MOCK_EXTERNAL_APIS=false
ENABLE_API_DOCS=true

# Test database (for running tests)
TEST_DATABASE_URL=postgresql://stockuser:securepassword123@localhost:5433/stock_anomaly_test